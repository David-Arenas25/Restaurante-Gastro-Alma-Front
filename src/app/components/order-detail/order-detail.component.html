<header class="relative bg-gradient-to-br from-emerald-800 via-emerald-900 to-gray-900 text-white shadow-2xl rounded-b-3xl overflow-hidden">
  <div class="absolute inset-0 opacity-25 pointer-events-none">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_60%_40%,rgba(255,255,255,0.10),transparent_60%)]"></div>
    <div class="absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.06)_30%,transparent_70%)]"></div>
  </div>
  <div  class="relative px-8 py-7 flex flex-col md:flex-row md:items-center md:justify-between gap-6">
    <div class="flex flex-col gap-2">
      <div class="flex items-center gap-3">
        <span class="w-4 h-4 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full shadow"></span>
        <h2 class="text-4xl font-black tracking-tight drop-shadow">
          Pedido <span class="text-emerald-300 font-mono">#{{ orderDetail().orderId }}</span>
        </h2>
      </div>
      <div class="flex items-center gap-4 mt-2">
        <span class="inline-flex items-center px-4 py-1 rounded-full text-base font-semibold border border-emerald-400/30 bg-emerald-500/10 text-emerald-200 shadow">
          <i class="fas fa-info-circle mr-2"></i>{{ orderDetail().status }}
        </span>
        <span class="flex items-center gap-2 bg-white/10 rounded-xl px-4 py-1 border border-white/20 text-xl font-bold text-green-300 font-mono shadow">
          <i class="fas fa-dollar-sign"></i>{{ orderDetail().total | currency : 'USD' }}
        </span>
      </div>
    </div>
    <div class="flex flex-row gap-3 items-center">
      <div class="flex space-x-4">
        
        <div class="group relative">
          <button (click)="showPay()" class="p-4 bg-white/10 hover:bg-yellow-500/90 rounded-full shadow-lg border border-yellow-400/30 transition-all duration-200 focus:outline-none">
            <i class="fas fa-credit-card text-2xl text-yellow-500 group-hover:text-white transition"></i>
          </button>
          <span class="absolute left-1/2 -translate-x-1/2 mt-2 px-3 py-1 rounded bg-gray-900 text-white text-xs opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap">
            Pagar
          </span>
        </div>
        <div class="group relative">
          <button [routerLink]="['/orders', orderDetail().tableId]" class="p-4 bg-white/10 hover:bg-red-500/90 rounded-full shadow-lg border border-red-400/30 transition-all duration-200 focus:outline-none">
            <i class="fas fa-times text-2xl text-red-500 group-hover:text-white transition"></i>
          </button>
          <span class="absolute left-1/2 -translate-x-1/2 mt-2 px-3 py-1 rounded bg-gray-900 text-white text-xs opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap">
            Cerrar
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="flex flex-col md:flex-row gap-10 p-10 bg-gradient-to-br from-gray-100 via-gray-50 to-emerald-50 min-h-[70vh]">
  <!-- Sección de Platos y Bebidas (Pedidos actuales) -->
  <section *ngIf="!showPayment"  class="w-1/2 flex-1 flex flex-col gap-8">
     <div class="bg-white/90 rounded-3xl shadow-2xl border border-gray-200/70 flex flex-col hover:shadow-cyan-100 transition-shadow">
      <div class="p-1 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-t-3xl"></div>
      <div class="p-7 flex flex-col gap-4">
        <h4 class="text-2xl font-extrabold text-gray-800 flex items-center gap-2">
          <i class="fas fa-cocktail text-blue-500"></i>Bebidas
        </h4>
        <app-drinkorder [orderId]="slug" class="w-full" />
      </div>
    </div>
    <div class= "bg-white/90 rounded-3xl shadow-2xl border border-gray-200/70 flex flex-col hover:shadow-emerald-100 transition-shadow">
      <div class="p-1 bg-gradient-to-r from-orange-400 to-red-500 rounded-t-3xl"></div>
      <div class="p-7 flex flex-col gap-4">
        <h4 class="text-2xl font-extrabold text-gray-800 flex items-center gap-2">
          <i class="fas fa-drumstick-bite text-orange-500"></i>Platos
        </h4>
        <app-dishorder [orderId]="slug" class="w-full" (deleteOrder)="updatePrice(orderDetail().orderId)" />
      </div>
    </div>
   
  </section>



  <!-- Sección de Pago -->
  <section *ngIf="showPayment" class="flex-1 flex items-center justify-center">
    <div class="w-full max-w-lg bg-white/95 rounded-3xl shadow-2xl border border-emerald-200/50 p-12 flex flex-col gap-10">
      <div class="flex items-center justify-center gap-4 mb-4">
        <div class="w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
          <i class="fas fa-credit-card text-white text-3xl"></i>
        </div>
        <h3 class="text-3xl font-black text-gray-800">Finalizar Pago</h3>
      </div>
      <form class="flex flex-col gap-7">
        <div>
          <label for="totalToPay" class="block text-lg font-bold text-gray-700 mb-2">Total a Pagar</label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
            </span>
            <input
              type="number"
              id="totalToPay"
              class="w-full pl-12 pr-4 py-5 text-3xl font-extrabold text-center bg-white border-2 border-emerald-200 rounded-xl focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200 shadow-sm hover:shadow-md"
              placeholder="0.00"
              step="0.01"
              min="0"
              [formControl]="quantity"
            />
          </div>
        </div>
        <button
          (click)="pay(orderDetail().orderId, orderDetail().status)"
          [disabled]="orderDetail().status === 'PAGADO' || orderDetail().status === 'CAMBIO'"
          type="button"
          [ngClass]="{
            'w-full py-5 px-8 font-black text-2xl rounded-xl shadow-lg transform transition-all duration-200 border-2': true,
            'bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white hover:shadow-xl hover:scale-[1.02] border-green-500/50 hover:border-green-400 cursor-pointer': orderDetail().status !== 'PAGADO' && orderDetail().status !== 'CAMBIO',
            'bg-gray-400 text-gray-200 border-gray-300 cursor-not-allowed opacity-60': orderDetail().status === 'PAGADO' || orderDetail().status === 'CAMBIO'
          }"
        >
          <div class="flex items-center justify-center gap-4">
            <i class="fas fa-money-bill-wave text-3xl"></i>
            <span>
              {{ orderDetail().status === 'PAGADO' ? 'Ya Pagado' : orderDetail().status === 'CAMBIO' ? 'En Cambio' : 'Procesar Pago' }}
            </span>
          </div>
        </button>
        <div class="flex items-center justify-center gap-2 text-base text-gray-500 mt-2">
          <i class="fas fa-shield-alt text-green-500"></i>
          <span>Pago seguro y protegido</span>
        </div>
      </form>
    </div>
  </section>
</main>